mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
hou_kc = as_tibble(hou_kc)
hou_kc_sentiment = hou_kc %>%
unnest_tokens(word, Body)
hou_kc_sentiment = hou_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# sea gb
sea_gb = read.csv("data/sea_gb.csv", stringsAsFactors = FALSE)
sea_gb = sea_gb %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sea_gb = as_tibble(sea_gb)
sea_gb_sentiment = sea_gb %>%
unnest_tokens(word, Body)
sea_gb_sentiment = sea_gb_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten bal
ten_bal = read.csv("data/ten_bal.csv", stringsAsFactors = FALSE)
ten_bal = ten_bal %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_bal = as_tibble(ten_bal)
ten_bal_sentiment = ten_bal %>%
unnest_tokens(word, Body)
ten_bal_sentiment = ten_bal_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# min sf
min_sf = read.csv("data/min_sf.csv", stringsAsFactors = FALSE)
min_sf = min_sf %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
min_sf = as_tibble(min_sf)
min_sf_sentiment = min_sf %>%
unnest_tokens(word, Body)
min_sf_sentiment = min_sf_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# sea phi
sea_phi = read.csv("data/sea_phi.csv", stringsAsFactors = FALSE)
sea_phi = sea_phi %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sea_phi = as_tibble(sea_phi)
sea_phi_sentiment = sea_phi %>%
unnest_tokens(word, Body)
sea_phi_sentiment = sea_phi_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# min no
min_no = read.csv("data/min_no.csv", stringsAsFactors = FALSE)
min_no = min_no %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
min_no = as_tibble(min_no)
min_no_sentiment = min_no %>%
unnest_tokens(word, Body)
min_no_sentiment = min_no_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten ne
ten_ne = read.csv("data/ten_ne.csv", stringsAsFactors = FALSE)
ten_ne = ten_ne %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_ne = as_tibble(ten_ne)
ten_ne_sentiment = ten_ne %>%
unnest_tokens(word, Body)
ten_ne_sentiment = ten_ne_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# hou buff
hou_buff = read.csv("data/hou_buff.csv", stringsAsFactors = FALSE)
hou_buff = hou_buff %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
hou_buff = as_tibble(hou_buff)
hou_buff_sentiment = hou_buff %>%
unnest_tokens(word, Body)
hou_buff_sentiment = hou_buff_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
View(sea_gb_sentiment)
risky = post %>%
filter(Season == 2019, down == 4, !play_type %in% c("punt", "field_goal"), ydstogo > 3, game_id != 2020012600)
View(risky)
risky %>% filter(home_team == "SF", away_team == "KC") %>% select(game_id)
risky %>% filter(home_team == "KC", away_team == "SF") %>% select(game_id)
# sf kc
sf_kc = read.csv("data/sf_kc.csv", stringsAsFactors = FALSE)
sf_kc = sf_kc %>%
mutate(game_id = 2020020200) %>%
mutate(Created = as_datetime(Created)) %>%
select(Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sf_kc = as_tibble(sf_kc)
sf_kc_sentiment = sf_kc %>%
unnest_tokens(word, Body)
sf_kc_sentiment = sf_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
View(sf_kc_sentiment)
sf_kc = read.csv("data/sf_kc.csv", stringsAsFactors = FALSE)
sf_kc = sf_kc %>%
mutate(game_id = 2020020200) %>%
mutate(Created = as_datetime(Created)) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sf_kc = as_tibble(sf_kc)
sf_kc_sentiment = sf_kc %>%
unnest_tokens(word, Body)
sf_kc_sentiment = sf_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
risky %>% filter(home_team == "KC", away_team == "TEN") %>% select(game_id)
risky %>% filter(home_team == "SF", away_team == "GB") %>% select(game_id)
risky %>% filter(home_team == "KC", away_team == "HOU") %>% select(game_id)
risky %>% filter(home_team == "GB", away_team == "SEA") %>% select(game_id)
risky %>% filter(home_team == "BAL", away_team == "TEN") %>% select(game_id)
risky %>% filter(home_team == "SF", away_team == "MIN") %>% select(game_id)
risky %>% filter(home_team == "PHI", away_team == "SEA") %>% select(game_id)
risky %>% filter(home_team == "NO", away_team == "MIN") %>% select(game_id)
post %>% filter(home_team == "NO", away_team == "MIN") %>% select(game_id)
risky %>% filter(home_team == "NE", away_team == "TEN") %>% select(game_id)
risky %>% filter(home_team == "BUF", away_team == "HOU") %>% select(game_id)
risky %>% filter(home_team == "HOU", away_team == "BUF") %>% select(game_id)
# Calculate sentiment for all games, compile into single dataset
my_stop_words <- tibble(
word = c(
"https",
"fucking",
"fuck",
"shit",
"football",
"nfl",
"league"
),
lexicon = "reddit"
)
all_stop_words <- stop_words %>%
bind_rows(my_stop_words)
# sf kc
sf_kc = read.csv("data/sf_kc.csv", stringsAsFactors = FALSE)
sf_kc = sf_kc %>%
mutate(game_id = 2020020200) %>%
mutate(Created = as_datetime(Created)) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sf_kc = as_tibble(sf_kc)
sf_kc_sentiment = sf_kc %>%
unnest_tokens(word, Body)
sf_kc_sentiment = sf_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten kc
ten_kc = read.csv("data/ten_kc.csv", stringsAsFactors = FALSE)
ten_kc = ten_kc %>%
mutate(game_id = 2020011900) %>%
mutate(Created = as_datetime(Created)) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_kc = as_tibble(ten_kc)
ten_kc_sentiment = ten_kc %>%
unnest_tokens(word, Body)
ten_kc_sentiment = ten_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# gb sf
gb_sf = read.csv("data/gb_sf.csv", stringsAsFactors = FALSE)
gb_sf = gb_sf %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011901) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
gb_sf = as_tibble(gb_sf)
gb_sf_sentiment = gb_sf %>%
unnest_tokens(word, Body)
gb_sf_sentiment = gb_sf_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# hou kc
hou_kc = read.csv("data/hou_kc.csv", stringsAsFactors = FALSE)
hou_kc = hou_kc %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011200) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
hou_kc = as_tibble(hou_kc)
hou_kc_sentiment = hou_kc %>%
unnest_tokens(word, Body)
hou_kc_sentiment = hou_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# sea gb
sea_gb = read.csv("data/sea_gb.csv", stringsAsFactors = FALSE)
sea_gb = sea_gb %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011201) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sea_gb = as_tibble(sea_gb)
sea_gb_sentiment = sea_gb %>%
unnest_tokens(word, Body)
sea_gb_sentiment = sea_gb_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten bal
ten_bal = read.csv("data/ten_bal.csv", stringsAsFactors = FALSE)
ten_bal = ten_bal %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011101) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_bal = as_tibble(ten_bal)
ten_bal_sentiment = ten_bal %>%
unnest_tokens(word, Body)
ten_bal_sentiment = ten_bal_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# min sf
min_sf = read.csv("data/min_sf.csv", stringsAsFactors = FALSE)
min_sf = min_sf %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011100) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
min_sf = as_tibble(min_sf)
min_sf_sentiment = min_sf %>%
unnest_tokens(word, Body)
min_sf_sentiment = min_sf_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# sea phi
sea_phi = read.csv("data/sea_phi.csv", stringsAsFactors = FALSE)
sea_phi = sea_phi %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020010501) %>%
select(gamed_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sea_phi = as_tibble(sea_phi)
sea_phi_sentiment = sea_phi %>%
unnest_tokens(word, Body)
sea_phi_sentiment = sea_phi_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# min no
min_no = read.csv("data/min_no.csv", stringsAsFactors = FALSE)
min_no = min_no %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2010012401) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
min_no = as_tibble(min_no)
min_no_sentiment = min_no %>%
unnest_tokens(word, Body)
min_no_sentiment = min_no_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten ne
ten_ne = read.csv("data/ten_ne.csv", stringsAsFactors = FALSE)
ten_ne = ten_ne %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020010401) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_ne = as_tibble(ten_ne)
ten_ne_sentiment = ten_ne %>%
unnest_tokens(word, Body)
ten_ne_sentiment = ten_ne_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# hou buff
hou_buff = read.csv("data/hou_buff.csv", stringsAsFactors = FALSE)
hou_buff = hou_buff %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020010400) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
hou_buff = as_tibble(hou_buff)
hou_buff_sentiment = hou_buff %>%
unnest_tokens(word, Body)
hou_buff_sentiment = hou_buff_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# Calculate sentiment for all games, compile into single dataset
my_stop_words <- tibble(
word = c(
"https",
"fucking",
"fuck",
"shit",
"football",
"nfl",
"league"
),
lexicon = "reddit"
)
all_stop_words <- stop_words %>%
bind_rows(my_stop_words)
# sf kc
sf_kc = read.csv("data/sf_kc.csv", stringsAsFactors = FALSE)
sf_kc = sf_kc %>%
mutate(game_id = 2020020200) %>%
mutate(Created = as_datetime(Created)) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sf_kc = as_tibble(sf_kc)
sf_kc_sentiment = sf_kc %>%
unnest_tokens(word, Body)
sf_kc_sentiment = sf_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten kc
ten_kc = read.csv("data/ten_kc.csv", stringsAsFactors = FALSE)
ten_kc = ten_kc %>%
mutate(game_id = 2020011900) %>%
mutate(Created = as_datetime(Created)) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_kc = as_tibble(ten_kc)
ten_kc_sentiment = ten_kc %>%
unnest_tokens(word, Body)
ten_kc_sentiment = ten_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# gb sf
gb_sf = read.csv("data/gb_sf.csv", stringsAsFactors = FALSE)
gb_sf = gb_sf %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011901) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
gb_sf = as_tibble(gb_sf)
gb_sf_sentiment = gb_sf %>%
unnest_tokens(word, Body)
gb_sf_sentiment = gb_sf_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# hou kc
hou_kc = read.csv("data/hou_kc.csv", stringsAsFactors = FALSE)
hou_kc = hou_kc %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011200) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
hou_kc = as_tibble(hou_kc)
hou_kc_sentiment = hou_kc %>%
unnest_tokens(word, Body)
hou_kc_sentiment = hou_kc_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# sea gb
sea_gb = read.csv("data/sea_gb.csv", stringsAsFactors = FALSE)
sea_gb = sea_gb %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011201) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sea_gb = as_tibble(sea_gb)
sea_gb_sentiment = sea_gb %>%
unnest_tokens(word, Body)
sea_gb_sentiment = sea_gb_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten bal
ten_bal = read.csv("data/ten_bal.csv", stringsAsFactors = FALSE)
ten_bal = ten_bal %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011101) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_bal = as_tibble(ten_bal)
ten_bal_sentiment = ten_bal %>%
unnest_tokens(word, Body)
ten_bal_sentiment = ten_bal_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# min sf
min_sf = read.csv("data/min_sf.csv", stringsAsFactors = FALSE)
min_sf = min_sf %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020011100) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
min_sf = as_tibble(min_sf)
min_sf_sentiment = min_sf %>%
unnest_tokens(word, Body)
min_sf_sentiment = min_sf_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# sea phi
sea_phi = read.csv("data/sea_phi.csv", stringsAsFactors = FALSE)
sea_phi = sea_phi %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020010501) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
sea_phi = as_tibble(sea_phi)
sea_phi_sentiment = sea_phi %>%
unnest_tokens(word, Body)
sea_phi_sentiment = sea_phi_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# min no
min_no = read.csv("data/min_no.csv", stringsAsFactors = FALSE)
min_no = min_no %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2010012401) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
min_no = as_tibble(min_no)
min_no_sentiment = min_no %>%
unnest_tokens(word, Body)
min_no_sentiment = min_no_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# ten ne
ten_ne = read.csv("data/ten_ne.csv", stringsAsFactors = FALSE)
ten_ne = ten_ne %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020010401) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
ten_ne = as_tibble(ten_ne)
ten_ne_sentiment = ten_ne %>%
unnest_tokens(word, Body)
ten_ne_sentiment = ten_ne_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
# hou buff
hou_buff = read.csv("data/hou_buff.csv", stringsAsFactors = FALSE)
hou_buff = hou_buff %>%
mutate(Created = as_datetime(Created)) %>%
mutate(game_id = 2020010400) %>%
select(game_id, Score, Created, Body) %>%
filter(Created <= min(Created) + hours(1))
hou_buff = as_tibble(hou_buff)
hou_buff_sentiment = hou_buff %>%
unnest_tokens(word, Body)
hou_buff_sentiment = hou_buff_sentiment %>%
anti_join(all_stop_words) %>%
inner_join(get_sentiments("nrc"), by = "word")
View(gb_sf_sentiment)
sentiments = rbind(gb_sf_sentiment,
hou_buff_sentiment,
hou_kc_sentiment,
min_no_sentiment,
min_sf_sentiment,
sea_gb_sentiment,
sea_phi_sentiment,
sf_kc_sentiment,
ten_bal_sentiment,
ten_kc_sentiment,
ten_ne_sentiment)
saveRDS(sentiments, "2019_sentiments.rds")
sent = readRDS("sentiments.rds")
sent = readRDS("2019_sentiments.rds")
sent = readRDS("2019_sentiments.rds")
View(sent)
post$away_team[game_id == 2020010401]
post$away_team[post$game_id == 2020010401]
post$away_team[post$game_id == 2020010401][1]
reg_2010 <- read_csv("data/regular_season/reg_pbp_2010.csv")
# Make one regular season rds file for analysis
reg_2009 <- read_csv("data/regular_season/reg_pbp_2009.csv")
setwd("D:/Priyam/Desktop/INFO550_Final/code")
# Make one regular season rds file for analysis
reg_2009 <- read_csv("data/regular_season/reg_pbp_2009.csv")
library(tidyr)
library(readr)
reg_2012 <- read_csv("data/regular_season/reg_pbp_2012.csv")
library(dplyr)
library(tidyr)
library(readr)
library(ggplot2)
library(RedditExtractoR)
reg_2011 <- read_csv("data/regular_season/reg_pbp_2011.csv")
problems()
# Make one regular season rds file for analysis
reg_2009 <- read_csv("data/regular_season/reg_pbp_2009.csv")
# Read in one year's data
pre_2019 = read_csv("data/pre_season/pre_pbp_2009.csv")
reg_2019 = read_csv("data/regular_season/reg_pbp_2009.csv")
post_2019 = read_csv("data/post_season/post_pbp_2009.csv")
setwd("D:/Priyam/Desktop/INFO550_Final/code")
# Read in one year's data
pre_2019 = read_csv("data/pre_season/pre_pbp_2009.csv")
problems(pre_2019 = read_csv("data/pre_season/pre_pbp_2009.csv"))
problems()
# Read in one year's data
pre_2019 = read_csv("data/pre_season/pre_pbp_2009.csv")
reg_2019 = read_csv("data/regular_season/reg_pbp_2009.csv")
post_2019 = read_csv("data/post_season/post_pbp_2009.csv")
library(dplyr)
library(tidyr)
library(readr)
library(ggplot2)
library(RedditExtractoR)
pre_2019 = read_csv("data/pre_season/pre_pbp_2009.csv")
reg_2019 = read_csv("data/regular_season/reg_pbp_2009.csv")
post_2019 = read_csv("data/post_season/post_pbp_2009.csv")
