library(dplyr)
library(readr)
library(ggplot2)
reg_2009 <- read_csv("data/regular_season/reg_pbp_2009.csv")
problems(reg_2009)
reg_2009 %>% filter(play_id == 2316)
reg_2009 %>% filter(play_id == 2316) %>% filter(game_id = 2009110810)
reg_2009 %>% filter(play_id == 2316) %>% filter(game_id == 2009110810)
reg_2009 %>% filter(play_id == 2316) %>% filter(game_id == 2009110810) %>% selecT(pass_defense_2_player_id)
reg_2009 %>% filter(play_id == 2316) %>% filter(game_id == 2009110810) %>% select(pass_defense_2_player_id)
library(dplyr)
library(readr)
library(ggplot2)
reg_2009 <- read_csv("data/regular_season/reg_pbp_2009.csv")
# Look at data
summary(reg_2009)
head(reg_2009)
# How many 4th downs per season? ~ 4,000 in the regular season
table(reg_2009$down)
# How many 4th downs per game? ~ 16 4th downs per game
fourth = reg_2009 %>%
filter(down == 4) %>%
group_by(game_id) %>%
summarize(count = n())
fourth %>% summarize(mean(count))
pre_2009 = read_csv("data/pre_season/pre_pbp_2009.csv")
reg_2009 = read_csv("data/regular_season/reg_pbp_2009.csv")
post_2009 = read_csv("data/post_season/post_pbp_2009.csv")
table(pre_2009)/nrow(pre_2009)
# How many 4th downs per season? ~ 4,000 in the regular season
table(reg_2009$down)/nrow(reg_2009)
table(pre_2009$down)/nrow(pre_2009)
table(post_2009$down)/nrow(post_2009)
# How many 4th downs per season? ~ 4,000 in the regular season
table(pre_2009$down)/nrow(pre_2009)
table(reg_2009$down)/nrow(reg_2009)
table(post_2009$down)/nrow(post_2009)
# Make one regular season rds file for analysis
reg_2010 <- read_csv("data/regular_season/reg_pbp_2010.csv")
reg_2011 <- read_csv("data/regular_season/reg_pbp_2011.csv")
reg_2012 <- read_csv("data/regular_season/reg_pbp_2012.csv")
reg_2013 <- read_csv("data/regular_season/reg_pbp_2013.csv")
reg_2014 <- read_csv("data/regular_season/reg_pbp_2014.csv")
reg_2015 <- read_csv("data/regular_season/reg_pbp_2015.csv")
reg_2016 <- read_csv("data/regular_season/reg_pbp_2016.csv")
reg_2017 <- read_csv("data/regular_season/reg_pbp_2017.csv")
reg_2018 <- read_csv("data/regular_season/reg_pbp_2018.csv")
reg_2019 <- read_csv("data/regular_season/reg_pbp_2019.csv")
reg_seasons = rbind(reg_2009,
reg_2010,
reg_2011,
reg_2012,
reg_2013,
reg_2014,
reg_2015,
reg_2016,
reg_2017,
reg_2018,
reg_2019)
saveRDS(reg_seasons, "reg_seasons.rds")
View(reg_seasons)
library(dplyr)
reg_2009 = read_csv("data/regular_season/reg_pbp_2009.csv")
library(readr)
reg_2009 = read_csv("data/regular_season/reg_pbp_2009.csv")
reg_2009 %>% filter(down == 4)
test = reg_2009 %>% filter(down == 4)
test$fourth_down_converted
test$fourth_down_failed
View(test)
install.packages("RedditExtractoR")
library(RedditExtractoR)
Reddit_url = "https://www.reddit.com/r/nfl/comments/e4kgbx/game_thread_san_francisco_49ers_101_at_baltimore/"
url_data = reddit_content(Reddit_url)
View(url_data)
?reddit_content
View(url_data)
table(url_data$comment_score)
table(url_data$comment)
View(url_data)
Reddit_url = "https://old.reddit.com/r/nfl/comments/e4kgbx/game_thread_san_francisco_49ers_101_at_baltimore/?sort=confidence"
url_data = reddit_content(Reddit_url)
table(url_data$comment_score)
Reddit_url = "https://www.reddit.com/r/nfl/comments/e4kgbx/game_thread_san_francisco_49ers_101_at_baltimore/?sort=confidence"
url_data = reddit_content(Reddit_url)
View(url_data)
View(url_data)
Reddit_url = "https://www.reddit.com/r/nfl/comments/e4kgbx/game_thread_san_francisco_49ers_101_at_baltimore"
url_data = reddit_content(Reddit_url)
# Read in one year's data
pre_2019 = read_csv("data/pre_season/pre_pbp_2009.csv")
reg_2019 = read_csv("data/regular_season/reg_pbp_2009.csv")
post_2019 = read_csv("data/post_season/post_pbp_2009.csv")
# Look at data
summary(reg_2019)
head(reg_2019)
# How many 4th downs per season? ~ 4,000 in the regular season, 8-10% of plays, 10 in pre-season -> 8 in post-season
table(pre_2019$down)/nrow(pre_2019)
table(reg_2019$down)/nrow(reg_2019)
table(post_2019$down)/nrow(post_2019)
# How many 4th downs per game? ~ 16 4th downs per game
fourth = reg_2019 %>%
filter(down == 4) %>%
group_by(game_id) %>%
summarize(count = n())
fourth %>% summarize(mean(count))
hist(pre_2019$down)
hist(factor(pre_2019$down))
hist(as.character(pre_2019$down))
pre_2019 %>% as.character() %>% hist()
pre_2019$down %>% as.character() %>% hist()
barplot(prop.table(table(post_2019$down)))
barplot(prop.table(table(post_2019$down)), main = "Post-season 2019", xlab = "Play Down", ylab = "Frequency")
par(mfrow=c(2,2))
barplot(prop.table(table(post_2019$down)), main = "Pre-season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(post_2019$down)), main = "Regular Season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(post_2019$down)), main = "Post-season 2019", xlab = "Play Down", ylab = "Frequency")
pie(prop.table(table(post_2019$down))
)
pie(prop.table(table(post_2019$down)))
pie(prop.table(table(pre_2019$down)))
pie(prop.table(table(reg_2019$down)))
barplot(prop.table(table(pre_2019$down)), main = "Pre-season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(reg_2019$down)), main = "Regular Season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(post_2019$down)), main = "Post-season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(pre_2019$down)), main = "Pre-season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(reg_2019$down)), main = "Regular Season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(pre_2019$down)), main = "Pre-season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(reg_2019$down)), main = "Regular Season 2019", xlab = "Play Down", ylab = "Frequency")
barplot(prop.table(table(post_2019$down)), main = "Post-season 2019", xlab = "Play Down", ylab = "Frequency")
reg_2010 <- read_csv("data/regular_season/reg_pbp_2010.csv")
reg_2011 <- read_csv("data/regular_season/reg_pbp_2011.csv")
reg_2012 <- read_csv("data/regular_season/reg_pbp_2012.csv")
reg_2013 <- read_csv("data/regular_season/reg_pbp_2013.csv")
reg_2014 <- read_csv("data/regular_season/reg_pbp_2014.csv")
reg_2015 <- read_csv("data/regular_season/reg_pbp_2015.csv")
reg_2016 <- read_csv("data/regular_season/reg_pbp_2016.csv")
reg_2017 <- read_csv("data/regular_season/reg_pbp_2017.csv")
reg_2018 <- read_csv("data/regular_season/reg_pbp_2018.csv")
reg_2019 <- read_csv("data/regular_season/reg_pbp_2019.csv")
reg_seasons = rbind(reg_2009,
reg_2010,
reg_2011,
reg_2012,
reg_2013,
reg_2014,
reg_2015,
reg_2016,
reg_2017,
reg_2018,
reg_2019)
saveRDS(reg_seasons, "reg_seasons.rds")
library(dplyr)
library(tidyr)
library(readr)
library(ggplot2)
library(RedditExtractoR)
# Read in one year's data
pre_2019 = read_csv("data/pre_season/pre_pbp_2009.csv")
reg_2019 = read_csv("data/regular_season/reg_pbp_2009.csv")
post_2019 = read_csv("data/post_season/post_pbp_2009.csv")
reg_2010 <- read_csv("data/regular_season/reg_pbp_2010.csv")
reg_2011 <- read_csv("data/regular_season/reg_pbp_2011.csv")
reg_2012 <- read_csv("data/regular_season/reg_pbp_2012.csv")
reg_2013 <- read_csv("data/regular_season/reg_pbp_2013.csv")
reg_2014 <- read_csv("data/regular_season/reg_pbp_2014.csv")
reg_2015 <- read_csv("data/regular_season/reg_pbp_2015.csv")
reg_2016 <- read_csv("data/regular_season/reg_pbp_2016.csv")
reg_2017 <- read_csv("data/regular_season/reg_pbp_2017.csv")
reg_2018 <- read_csv("data/regular_season/reg_pbp_2018.csv")
reg_2019 <- read_csv("data/regular_season/reg_pbp_2019.csv")
reg_seasons = rbind(reg_2009,
reg_2010,
reg_2011,
reg_2012,
reg_2013,
reg_2014,
reg_2015,
reg_2016,
reg_2017,
reg_2018,
reg_2019)
saveRDS(reg_seasons, "reg_seasons.rds")
reg_2009 = read_csv("data/regular_season/reg_pbp_2009.csv")
reg_seasons = rbind(reg_2009,
reg_2010,
reg_2011,
reg_2012,
reg_2013,
reg_2014,
reg_2015,
reg_2016,
reg_2017,
reg_2018,
reg_2019)
saveRDS(reg_seasons, "reg_seasons.rds")
# Make one preseason season rds file for analysis
pre_2009 <- read_csv("data/pre_season/pre_pbp_2009.csv")
pre_2010 <- read_csv("data/pre_season/pre_pbp_2010.csv")
reg_2011 <- read_csv("data/pre_season/pre_pbp_2011.csv")
pre_2012 <- read_csv("data/pre_season/pre_pbp_2012.csv")
pre_2013 <- read_csv("data/pre_season/pre_pbp_2013.csv")
pre_2014 <- read_csv("data/pre_season/pre_pbp_2014.csv")
pre_2015 <- read_csv("data/pre_season/pre_pbp_2015.csv")
pre_2016 <- read_csv("data/pre_season/pre_pbp_2016.csv")
pre_2017 <- read_csv("data/pre_season/pre_pbp_2017.csv")
pre_2018 <- read_csv("data/pre_season/pre_pbp_2018.csv")
pre_2019 <- read_csv("data/pre_season/pre_pbp_2019.csv")
pre_seasons = rbind(pre_2009,
pre_2010,
pre_2011,
pre_2012,
pre_2013,
pre_2014,
pre_2015,
pre_2016,
pre_2017,
pre_2018,
pre_2019)
pre_2009 <- read_csv("data/pre_season/pre_pbp_2009.csv")
pre_2010 <- read_csv("data/pre_season/pre_pbp_2010.csv")
pre_2011 <- read_csv("data/pre_season/pre_pbp_2011.csv")
pre_2012 <- read_csv("data/pre_season/pre_pbp_2012.csv")
pre_2013 <- read_csv("data/pre_season/pre_pbp_2013.csv")
pre_2014 <- read_csv("data/pre_season/pre_pbp_2014.csv")
pre_2015 <- read_csv("data/pre_season/pre_pbp_2015.csv")
pre_2016 <- read_csv("data/pre_season/pre_pbp_2016.csv")
pre_2017 <- read_csv("data/pre_season/pre_pbp_2017.csv")
pre_2018 <- read_csv("data/pre_season/pre_pbp_2018.csv")
pre_2019 <- read_csv("data/pre_season/pre_pbp_2019.csv")
pre_2009 <- read_csv("data/pre_season/pre_pbp_2009.csv")
pre_2010 <- read_csv("data/pre_season/pre_pbp_2010.csv")
pre_2011 <- read_csv("data/pre_season/pre_pbp_2011.csv")
pre_2012 <- read_csv("data/pre_season/pre_pbp_2012.csv")
pre_2013 <- read_csv("data/pre_season/pre_pbp_2013.csv")
pre_2014 <- read_csv("data/pre_season/pre_pbp_2014.csv")
pre_2015 <- read_csv("data/pre_season/pre_pbp_2015.csv")
pre_2016 <- read_csv("data/pre_season/pre_pbp_2016.csv")
pre_2017 <- read_csv("data/pre_season/pre_pbp_2017.csv")
pre_2018 <- read_csv("data/pre_season/pre_pbp_2018.csv")
pre_2019 <- read_csv("data/pre_season/pre_pbp_2019.csv")
pre_seasons = rbind(pre_2009,
pre_2010,
pre_2011,
pre_2012,
pre_2013,
pre_2014,
pre_2015,
pre_2016,
pre_2017,
pre_2018,
pre_2019)
saveRDS(pre_seasons, "pre_seasons.rds")
post_2009 <- read_csv("data/post_season/post_pbp_2009.csv")
post_2010 <- read_csv("data/post_season/post_pbp_2010.csv")
post_2011 <- read_csv("data/post_season/post_pbp_2011.csv")
post_2012 <- read_csv("data/post_season/post_pbp_2012.csv")
post_2013 <- read_csv("data/post_season/post_pbp_2013.csv")
post_2014 <- read_csv("data/post_season/post_pbp_2014.csv")
post_2015 <- read_csv("data/post_season/post_pbp_2015.csv")
post_2016 <- read_csv("data/post_season/post_pbp_2016.csv")
post_2017 <- read_csv("data/post_season/post_pbp_2017.csv")
post_2018 <- read_csv("data/post_season/post_pbp_2018.csv")
post_2019 <- read_csv("data/post_season/post_pbp_2019.csv")
post_seasons = rbind(post_2009,
post_2010,
post_2011,
post_2012,
post_2013,
post_2014,
post_2015,
post_2016,
post_2017,
post_2018,
post_2019)
saveRDS(post_seasons, "post_seasons.rds")
View(post_2019)
columns(post_2019) - columns(post_2018)
colnames(post_2019)
colnames(post_2019) - colnames(post_2018)
list(colnames(post_2019)) - list(colnames(post_2018))
setdiff(colnames(post_2019),colnames(post_2018))
table(post_2019$X1)
post_2019 = post_2019[, !(colnames(post_2019) %in% c("X1"))]
post_seasons = rbind(post_2009,
post_2010,
post_2011,
post_2012,
post_2013,
post_2014,
post_2015,
post_2016,
post_2017,
post_2018,
post_2019)
Reddit_url = "https://www.reddit.com/r/nfl/comments/e4kgbx/game_thread_san_francisco_49ers_101_at_baltimore"
saveRDS(post_seasons, "post_seasons.rds")
knitr::opts_chunk$set(echo = TRUE)
library(shiny)
post = readRDS("D:\Priyam\Desktop\INFO550_Final\code\post_seasons.rds")
reg = readRDS("D:\Priyam\Desktop\INFO550_Final\code\reg_seasons.rds")
pre = readRDS("D:/Priyam/Desktop/INFO550_Final/code/pre_seasons.rds")
reg = readRDS("D:/Priyam/Desktop/INFO550_Final/code/reg_seasons.rds")
post = readRDS("D:/Priyam/Desktop/INFO550_Final/code/post_seasons.rds")
library(plotly)
library(shiny)
View(post)
test = post["defteam", "side_of_field", "yardline_100", "yrdln"]
test = post["defteam", "side_of_field", "yardline_100", "yrdln",]
test = post["defteam", "side_of_field", "yardline_100", "yrdln",]
test = post$play_id["defteam", "side_of_field", "yardline_100", "yrdln",]
test = post$play_id["defteam", "side_of_field", "yardline_100", "yrdln"]
library(dplyr)
test = post %>% select(defteam, side_of_field, yardline_100, yrdln)
View(test)
test = post %>% select(defteam, yardline_100, yrdln)
# https://rmarkdown.rstudio.com/lesson-14.html
selectInput("type", "Choose a game type",
choices = c("Preseason", "Regular Season", "Postseason"))
playData = reactive({
switch(input$type,
"Preseason" = pre,
"Regular Season" = reg,
"Postseason" = post)
})
# https://plotly.com/r/filled-area-plots
# For example, being on your own 20 yard line means you are 80 yards from their end zone, but being on their 20 yard line means you are 20 yards from their end zone.
renderPlotly(
playData %>%
plotly(x=~game_seconds_remaining, y=~yardline_100, type = 'scatter', mode = 'lines', fill = 'tozeroy')
)
pres %>%
plotly(x=~game_seconds_remaining, y=~yardline_100, type = 'scatter', mode = 'lines', fill = 'tozeroy')
pre %>%
plotly(x=~game_seconds_remaining, y=~yardline_100, type = 'scatter', mode = 'lines', fill = 'tozeroy')
pre %>%
plotly(x=pre$game_seconds_remaining, y=pre$yardline_100, type = 'scatter', mode = 'lines', fill = 'tozeroy')
pre %>%
plot_ly(x=~game_seconds_remaining, y=~yardline_100, type = 'scatter', mode = 'lines', fill = 'tozeroy')
